---
layout:     post
title:      "golangçš„[]byteã€stringã€runeåŒºåˆ«"
subtitle:   " \"æ¨ªçœ‹æˆå²­ä¾§æˆå³°ï¼Œè¿œè¿‘é«˜ä½å„ä¸åŒ\""
date:       2020-01-14 16:39:11
author:     "zhy"
catalog: true
header-img: "img/home-bg.jpg"
tags:
    - go
---

> ç¬¦å·ä¹‹æ‰€ä»¥æœ‰æ„ä¹‰ï¼Œæ˜¯å› ä¸ºå¤§å®¶çº¦å®šæˆä¿—èµ‹äºˆå…¶æ„ä¹‰ï¼Œé€šè¿‡ä¸åŒç¬¦å·ä»¥åŠæ’åˆ—ç»„åˆæ¥è¡¨è¾¾å†…å¿ƒçš„ä¸–ç•Œ

## ç ç‚¹ã€ç¬¦å·ã€å­—èŠ‚çš„ç†è§£
* ç¬¦å·ï¼šæˆ‘ä»¬è§åˆ°çš„ä»»æ„çš„æ ‡è®°ï¼Œæ¯”å¦‚è‹±æ–‡çš„'a'ï¼Œæ±‰å­—çš„'å¼ 'ï¼Œè¡¨æƒ…ğŸ˜Šï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç¬¦å·è€Œå·²
* ç ç‚¹ï¼šæˆ‘ä»¬æŠŠæ‰€æœ‰çš„ç¬¦å·æŒ‰ç…§é¡ºåºæ’åˆ—ï¼Œå³æ”¾åˆ°æ•°ç»„ä¸­ï¼Œä½¿ç”¨æ•°ç»„çš„ä¸‹æ ‡è¡¨ç¤ºæ¯ä¸ªç¬¦å·ï¼Œé‚£ä¹ˆä¸‹æ ‡çš„å€¼å³ä¸ºç ç‚¹ï¼Œå‚è€ƒ[ASCIIç¼–ç ](https://zh.wikipedia.org/zh-hans/ASCII)
* å­—èŠ‚ï¼šè®¡ç®—æœºè¡¨ç¤ºçš„æœ€å°å•ä½ï¼ˆé¦–å…ˆäºç¡¬ä»¶ï¼‰ï¼Œ1byte=8bitï¼Œæ¯bitåªèƒ½æ˜¯0æˆ–è€…1ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€å­—èŠ‚å¯ä»¥è¡¨ç¤º00000000-11111111ï¼ˆ0~255ï¼‰å…±256ä¸ªæ•°ï¼ˆ2è¿›åˆ¶è½¬åè¿›åˆ¶ï¼‰ï¼Œæ‰€ä»¥1byteå¯ä»¥è¡¨ç¤ºé•¿åº¦ä¸º256çš„æ•°ç»„çš„ä¸‹æ ‡ï¼Œå³è¡¨ç¤º256ä¸ªç ç‚¹ï¼Œè¿›è€Œå¯ä»¥è¡¨ç¤º256ä¸ªç¬¦å·

## unicodeã€utf-8ã€ASCIIç†è§£
* unicodeï¼šæ‰€æœ‰çš„å­—ç¬¦é›†çš„é›†åˆï¼Œæ²¡æœ‰æŒ‡å®šå¦‚ä½•å­˜å‚¨ï¼Œå¦‚æœå¯¹æ‰€æœ‰å­—ç¬¦æŒ‰ç…§ä¸€å®šè§„åˆ™æ’åºï¼Œé‚£ä¹ˆä¸‹è¡¨å¯¹åº”çš„æ˜¯ç ç‚¹
* ASCIIï¼šè‹±æ–‡å­—ç¬¦äºå¯¹åº”çš„äºŒè¿›åˆ¶å…³ç³»ï¼Œå³è‹±æ–‡å­—ç¬¦åœ¨è®¡ç®—æœºä¸­çš„å­˜å‚¨ï¼Œä½¿ç”¨ä¸€ä¸ªå­—èŠ‚çš„ä½7ä½è¡¨ç¤º
* utf-8ï¼šUnicodeçš„ä¸€ç§å®ç°ï¼Œä½¿ç”¨è¾¹é•¿çš„ç¼–ç æ–¹å¼ï¼Œä½¿ç”¨1~4ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œå‚è€ƒå…·ä½“[ç¼–ç ](https://en.wikipedia.org/wiki/UTF-8)

## []byteã€runeã€stringç†è§£
* []byteï¼šå­—èŠ‚æµï¼Œå¯ä»¥ç†è§£ä¸ºutf-8ç¼–ç åçš„å­—èŠ‚æµï¼Œè¡¨ç¤ºåœ¨è®¡ç®—æœºçš„å­˜å‚¨æ•°æ®ï¼Œæ¯ä¸ªbyteå¯ä»¥ä½¿ç”¨\xXXè¡¨ç¤ºï¼ŒXXè¡¨ç¤ºä¸€ä¸ªå­—èŠ‚çš„åå…­è¿›åˆ¶ï¼Œå¦‚"abcdå¼ "å¯ä»¥è¡¨ç¤ºä¸º"\x61\x62\x63\x64\xe5\xbc\xa0"
* rune: å¯ä»¥ç†è§£ä¸ºç ç‚¹ï¼Œåœ¨golangä¸­ä¼Ÿintç±»å‹ï¼Œå¦‚'å¼ 'ï¼Œè¡¨ç¤ºä¸º24352ï¼ˆ0x5F20ï¼‰ï¼Œutf-8ç¼–ç ä¸º'\xe5\xbc\xa0'
* stringï¼šç†è§£ä¸ºåªè¯»çš„å­—èŠ‚æµï¼Œä¸å¯ä»¥ä¿®æ”¹ï¼Œå¯¹äºbyteå’ŒstringåŒºåˆ«ï¼Œå¯ä»¥[å‚è€ƒ](https://syslog.ravelin.com/byte-vs-string-in-go-d645b67ca7ff)ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯rangeå¯¹stringéå†æ˜¯å¯¹utf-8è§£ç åçš„éå†ï¼Œå³å’Œstringè½¬åŒ–ä¸ºruneåéå†ç»“æœä¸€æ ·ï¼Œå¯¹byteéå†ï¼Œæœ¬è´¨ä¸Šæ˜¯æ¯ä¸ªå­—èŠ‚éå†ï¼Œè¯¦ç»†è§demo

## å­—ç¬¦ç¼–ç demo
* æ±‰å­—çš„ç ç‚¹ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤º
* æ±‰å­—çš„utf-8ç¼–ç æ˜¯ä¸‰ä¸ªå­—èŠ‚ï¼Œå¯ä»¥è¡¨ç¤º16bitï¼Œå³ä¸¤ä¸ªå­—èŠ‚
* 'å¼ 'çš„utf-8ç¼–ç '\xe5\xbc\xa0'å’Œç ç‚¹0x5f20çš„å¯¹åº”å…³ç³»å¦‚ä¸‹

```
| 1 | 1 | 1 | 0 | 0 | 1 | 0 | 1 | 1 | 0 | 1 | 1 | 1 | 1 | 0 | 0 | 1 | 0 | 1 | 0 | 0 | 0 | 0 | 0 |
-------------------------------------------------------------------------------------------------
|       e       |       5       |       b       |       c       |       a       |       0       |     
|         first byte            |           second byte         |            third byte         |
|use three bytes| first byte bit|       |    second byte bit    |       |    third byte bit     |

ç ç‚¹å³runeå€¼ï¼Œå³Unicodeé›†åˆä¸­çš„ä¸‹è¡¨
| 0 | 1 | 0 | 1 | 1 | 1 | 1 | 1 | 0 | 0 | 1 | 0 | 0 | 0 | 0 | 0 |
-----------------------------------------------------------------
| first byte bit|    second byte bit    |    third byte bit     |
|        5      |       f       |       2       |       0       |
```

## demo(golang)
* ä»£ç 

```
package main

import (
    "fmt"
)

var (
    demoS = `abcå¼ `
)

func printByByte(s []byte){
    tmpS := "printByByte:"
    for i,v := range s{
        tmpS = fmt.Sprintf("%s %d:%x",tmpS,i,v)
    }
    fmt.Println(tmpS)
}

func printByS(s string){
    tmpS := "printByString:"
    for i,v := range s{
        tmpS = fmt.Sprintf("%s %d:%U",tmpS,i,v)
    }
    fmt.Println(tmpS)
}

func printByRune(r []rune){
    tmpS := "printByRune:"
    for i,v := range r{
        tmpS = fmt.Sprintf("%s %d:%U",tmpS,i,v)
    }
    fmt.Println(tmpS)

}

func main(){
    printByByte([]byte(demoS))
    printByS(demoS)
    printByRune([]rune(demoS))
}
```

* è¾“å‡º

```
printByByte: 0:61 1:62 2:63 3:e5 4:bc 5:a0
printByString: 0:U+0061 1:U+0062 2:U+0063 3:U+5F20
printByRune: 0:U+0061 1:U+0062 2:U+0063 3:U+5F20
```

## å‚è€ƒæ–‡æ¡£
* [ASCIIç¼–ç ](https://zh.wikipedia.org/zh-hans/ASCII){:target="_blank"}
* [utf-8 encoding](https://en.wikipedia.org/wiki/UTF-8){:target="_blank"}
* [byteå’ŒstringåŒºåˆ«](https://syslog.ravelin.com/byte-vs-string-in-go-d645b67ca7ff)
* [ASCIIã€Unicodeå’ŒUTF-8](http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html)
* [Strings, bytes, runes and characters in Go](https://blog.golang.org/strings)


